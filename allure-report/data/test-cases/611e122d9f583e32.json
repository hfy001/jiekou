{
  "uid" : "611e122d9f583e32",
  "name" : "比价",
  "fullName" : "test_case.test_bijia#test_case01",
  "historyId" : "a4b0d5808a195a3fb2d431538b5194d3",
  "time" : {
    "start" : 1606560218946,
    "stop" : 1606560219354,
    "duration" : 408
  },
  "status" : "broken",
  "statusMessage" : "TypeError: 'NoneType' object is not subscriptable",
  "statusTrace" : "caseID = 2, host = 'http://192.168.2.252:18080'\npath = '/4000/4000/0/guest.medicine.getShopMedicines'\nheaders = \"{'Content-Type': 'application/x-www-form-urlencoded'}\"\nparams = '{\\n    \\'user_city_name\\':\\'上海市\\',\\n    \\'user_region_id\\':\\'95\\',\\n    \\'pageIndex\\':\\'1\\',\\n    \\'pageSize\\':\\'10\\',\\n    \\'conditions\\':\\'{\\\\\"medicineid\\\\\":\\\\\"278803\\\\\"}\\'\\n    }'\nmethod = 'get', rowid = 3\n\n    @allure.epic(\"药房网APP\")\n    @allure.feature(\"比价\")\n    @allure.step(\"比价\")\n    @allure.title(\"比价\")\n    @pytest.mark.parametrize(\"caseID,host,path,headers,params,method,rowid\",casedate)\n    def test_case01(caseID,host,path,headers,params,method,rowid):\n        res=Apimethod(host,path,eval(headers),eval(params),method)\n        print(res)\n        resstatuscode=res.getstatus()\n        rescode=res.getcode()\n        rerowcount=res.getrowcount()\n    \n    \n        b=eval(params)['conditions']\n        d=eval(b)['medicineid']\n    \n        sql = \"\"\"select count(*) from\n                               ( select sm.id  from stk_store_medicine sm\n                                 join stk_medicine m  on m.id=sm.medicineid\n                                 join sto_store st on st.id=sm.storeid\n                                 left join sys_region r on r.id=st.regionid\n                                 join sto_store_shop ss on st.id=ss.storeid\n                                 left join sto_store_fake sf on st.id=sf.storeid\n                                 join stk_special_category sc on sc.id=m.categoryid\n                                 join stk_store_medicine_price smp on smp.store_medicineid=sm.id and smp.dict_price_type=1\n                                 left JOIN  sto_app_keys sak on sak.storeid=st.id and sak.dict_bool_status=1\n                                 left join sto_store_config ssc on st.id=ssc.storeid\n                                 where st.dict_store_type=1\n                                 and st.dict_store_sub_type=0 and st.dict_business_status=1 and st.dict_business_status_store=1 and st.dict_store_status=4\n                                 and m.active=1 and sc.active=1 and sm.standard=m.standard   and sm.dict_store_medicine_status>0 and sm.reserve>0 and  sm.dict_scheduled_days < 2\n                                 and sc.dict_medicine_b2c_status>=0 and m.dict_medicine_b2c_status>=0 and (ss.dict_bool_fake=0 or( ss.dict_bool_fake=1 and ((dict_medicine_type>0\n                                 and sf.dict_store_fake<>1) OR (dict_medicine_type=0 and sf.dict_store_fake<>2) OR (dict_medicine_type=-1  and sf.dict_store_fake<>3)) ))\n                                 and m.id={0} and (IFNULL(sak.dict_app_type,0)=3 or ss.dict_shop_type!=3)\n                                 and ( r.name_path not like concat('%','全国','%' ) or st.dict_bool_citytrading=1 )  ) tb1 limit 1 ;\"\"\".format(d)\n    \n        db = mysqlDB.DB()\n    \n>       chaxun=db.query(sql)[0]['count(*)']\nE       TypeError: 'NoneType' object is not subscriptable\n\ntest_case\\test_bijia.py:52: TypeError",
  "flaky" : false,
  "newFailed" : false,
  "beforeStages" : [ ],
  "testStage" : {
    "status" : "broken",
    "statusMessage" : "TypeError: 'NoneType' object is not subscriptable",
    "statusTrace" : "caseID = 2, host = 'http://192.168.2.252:18080'\npath = '/4000/4000/0/guest.medicine.getShopMedicines'\nheaders = \"{'Content-Type': 'application/x-www-form-urlencoded'}\"\nparams = '{\\n    \\'user_city_name\\':\\'上海市\\',\\n    \\'user_region_id\\':\\'95\\',\\n    \\'pageIndex\\':\\'1\\',\\n    \\'pageSize\\':\\'10\\',\\n    \\'conditions\\':\\'{\\\\\"medicineid\\\\\":\\\\\"278803\\\\\"}\\'\\n    }'\nmethod = 'get', rowid = 3\n\n    @allure.epic(\"药房网APP\")\n    @allure.feature(\"比价\")\n    @allure.step(\"比价\")\n    @allure.title(\"比价\")\n    @pytest.mark.parametrize(\"caseID,host,path,headers,params,method,rowid\",casedate)\n    def test_case01(caseID,host,path,headers,params,method,rowid):\n        res=Apimethod(host,path,eval(headers),eval(params),method)\n        print(res)\n        resstatuscode=res.getstatus()\n        rescode=res.getcode()\n        rerowcount=res.getrowcount()\n    \n    \n        b=eval(params)['conditions']\n        d=eval(b)['medicineid']\n    \n        sql = \"\"\"select count(*) from\n                               ( select sm.id  from stk_store_medicine sm\n                                 join stk_medicine m  on m.id=sm.medicineid\n                                 join sto_store st on st.id=sm.storeid\n                                 left join sys_region r on r.id=st.regionid\n                                 join sto_store_shop ss on st.id=ss.storeid\n                                 left join sto_store_fake sf on st.id=sf.storeid\n                                 join stk_special_category sc on sc.id=m.categoryid\n                                 join stk_store_medicine_price smp on smp.store_medicineid=sm.id and smp.dict_price_type=1\n                                 left JOIN  sto_app_keys sak on sak.storeid=st.id and sak.dict_bool_status=1\n                                 left join sto_store_config ssc on st.id=ssc.storeid\n                                 where st.dict_store_type=1\n                                 and st.dict_store_sub_type=0 and st.dict_business_status=1 and st.dict_business_status_store=1 and st.dict_store_status=4\n                                 and m.active=1 and sc.active=1 and sm.standard=m.standard   and sm.dict_store_medicine_status>0 and sm.reserve>0 and  sm.dict_scheduled_days < 2\n                                 and sc.dict_medicine_b2c_status>=0 and m.dict_medicine_b2c_status>=0 and (ss.dict_bool_fake=0 or( ss.dict_bool_fake=1 and ((dict_medicine_type>0\n                                 and sf.dict_store_fake<>1) OR (dict_medicine_type=0 and sf.dict_store_fake<>2) OR (dict_medicine_type=-1  and sf.dict_store_fake<>3)) ))\n                                 and m.id={0} and (IFNULL(sak.dict_app_type,0)=3 or ss.dict_shop_type!=3)\n                                 and ( r.name_path not like concat('%','全国','%' ) or st.dict_bool_citytrading=1 )  ) tb1 limit 1 ;\"\"\".format(d)\n    \n        db = mysqlDB.DB()\n    \n>       chaxun=db.query(sql)[0]['count(*)']\nE       TypeError: 'NoneType' object is not subscriptable\n\ntest_case\\test_bijia.py:52: TypeError",
    "steps" : [ {
      "name" : "比价",
      "time" : {
        "start" : 1606560218946,
        "stop" : 1606560219354,
        "duration" : 408
      },
      "status" : "broken",
      "statusMessage" : "TypeError: 'NoneType' object is not subscriptable\n",
      "statusTrace" : "  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\allure_commons\\_allure.py\", line 157, in impl\n    return func(*a, **kw)\n  File \"E:\\pythonbijia\\test_case\\test_bijia.py\", line 52, in test_case01\n    chaxun=db.query(sql)[0]['count(*)']\n",
      "steps" : [ ],
      "attachments" : [ ],
      "parameters" : [ {
        "name" : "caseID",
        "value" : "2"
      }, {
        "name" : "host",
        "value" : "'http://192.168.2.252:18080'"
      }, {
        "name" : "path",
        "value" : "'/4000/4000/0/guest.medicine.getShopMedicines'"
      }, {
        "name" : "headers",
        "value" : "'{'Content-Type': 'application/x-www-form-urlencoded'}'"
      }, {
        "name" : "params",
        "value" : "'{\n    'user_city_name':'上海市',\n    'user_region_id':'95',\n    'pageIndex':'1',\n    'pageSize':'10',\n    'conditions':'{\\\"medicineid\\\":\\\"278803\\\"}'\n    }'"
      }, {
        "name" : "method",
        "value" : "'get'"
      }, {
        "name" : "rowid",
        "value" : "3"
      } ],
      "shouldDisplayMessage" : true,
      "attachmentsCount" : 0,
      "stepsCount" : 0,
      "hasContent" : true
    } ],
    "attachments" : [ ],
    "parameters" : [ ],
    "shouldDisplayMessage" : true,
    "attachmentsCount" : 0,
    "stepsCount" : 1,
    "hasContent" : true
  },
  "afterStages" : [ ],
  "labels" : [ {
    "name" : "epic",
    "value" : "药房网APP"
  }, {
    "name" : "feature",
    "value" : "比价"
  }, {
    "name" : "parentSuite",
    "value" : "test_case"
  }, {
    "name" : "suite",
    "value" : "test_bijia"
  }, {
    "name" : "host",
    "value" : "DESKTOP-EQA5M9D"
  }, {
    "name" : "thread",
    "value" : "6592-MainThread"
  }, {
    "name" : "framework",
    "value" : "pytest"
  }, {
    "name" : "language",
    "value" : "cpython3"
  }, {
    "name" : "package",
    "value" : "test_case.test_bijia"
  }, {
    "name" : "resultFormat",
    "value" : "allure2"
  } ],
  "parameters" : [ {
    "name" : "caseID",
    "value" : "2"
  }, {
    "name" : "headers",
    "value" : "'{'Content-Type': 'application/x-www-form-urlencoded'}'"
  }, {
    "name" : "host",
    "value" : "'http://192.168.2.252:18080'"
  }, {
    "name" : "method",
    "value" : "'get'"
  }, {
    "name" : "params",
    "value" : "'{\n    'user_city_name':'上海市',\n    'user_region_id':'95',\n    'pageIndex':'1',\n    'pageSize':'10',\n    'conditions':'{\\\"medicineid\\\":\\\"278803\\\"}'\n    }'"
  }, {
    "name" : "path",
    "value" : "'/4000/4000/0/guest.medicine.getShopMedicines'"
  }, {
    "name" : "rowid",
    "value" : "3"
  } ],
  "links" : [ ],
  "hidden" : false,
  "retry" : false,
  "extra" : {
    "severity" : "normal",
    "retries" : [ {
      "uid" : "1ff1261570166c6c",
      "status" : "broken",
      "statusDetails" : "TypeError: 'NoneType' object is not subscriptable",
      "time" : {
        "start" : 1605858887014,
        "stop" : 1605858887414,
        "duration" : 400
      }
    }, {
      "uid" : "86ff6f47ae9b94f0",
      "status" : "broken",
      "statusDetails" : "TypeError: 'NoneType' object is not subscriptable",
      "time" : {
        "start" : 1605850101054,
        "stop" : 1605850101500,
        "duration" : 446
      }
    }, {
      "uid" : "a25bac1191393dad",
      "status" : "broken",
      "statusDetails" : "TypeError: 'NoneType' object is not subscriptable",
      "time" : {
        "start" : 1605842256442,
        "stop" : 1605842256950,
        "duration" : 508
      }
    }, {
      "uid" : "367da4c2a56137ef",
      "status" : "broken",
      "statusDetails" : "TypeError: 'NoneType' object is not subscriptable",
      "time" : {
        "start" : 1605836381215,
        "stop" : 1605836381624,
        "duration" : 409
      }
    }, {
      "uid" : "6baa2d6baede05c7",
      "status" : "passed",
      "time" : {
        "start" : 1602581056749,
        "stop" : 1602581057181,
        "duration" : 432
      }
    } ],
    "categories" : [ {
      "name" : "Test defects",
      "matchedStatuses" : [ ],
      "flaky" : false
    } ],
    "tags" : [ ]
  },
  "source" : "611e122d9f583e32.json",
  "parameterValues" : [ "2", "'{'Content-Type': 'application/x-www-form-urlencoded'}'", "'http://192.168.2.252:18080'", "'get'", "'{\n    'user_city_name':'上海市',\n    'user_region_id':'95',\n    'pageIndex':'1',\n    'pageSize':'10',\n    'conditions':'{\\\"medicineid\\\":\\\"278803\\\"}'\n    }'", "'/4000/4000/0/guest.medicine.getShopMedicines'", "3" ]
}